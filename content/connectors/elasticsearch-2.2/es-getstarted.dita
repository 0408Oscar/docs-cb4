<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_mct_hcr_t5">
  <title>Getting started</title><shortdesc>This section explains how to prepare ElsticSearch Plugin and Couchbase Server and how to
    start data transfer.</shortdesc>
  <body>
    
    <section><title>Prepare EleasticSearch</title>
   <p>Follow these steps:</p> 
      <ol>
        <li>Install the plugin on each node in your Couchbase cluster.</li>
        <li>Install the Couchbase template:
          <codeblock> curl -XPUT http://localhost:9200/_template/couchbase -d @plugins/transport-couchbase/couchbase_template.json</codeblock></li>
        <li>Create an ElasticSearch index to store the data from Couchbase (for example, <codeph>default</codeph>)</li>
      </ol>   
    </section>
    
    <section><title>Prepare Couchbase Server</title>
      <p>Follow these steps:</p> 
      <ol>
        <li>Navigate to the Couchbase Server admin interface.</li>
        <li>Select the <wintitle>Replications</wintitle> tab.</li>
        <li>Press the button labeled <uicontrol>Create Cluster Reference</uicontrol>.</li>
        <li>Choose a name for your ElasticSearch cluster</li>
        <li>In the field <wintitle>IP/Hostname</wintitle> provide an address and port of one of the
          nodes in your ES cluster (<codeph>127.0.0.1:9091</codeph>).</li>
        <li>Enter the <varname>Username</varname> and <varname>Password</varname> corresponding to
          your <codeph>couchbase.username</codeph> and <codeph>couchbase.password</codeph> settings
          in ElasticSearch.</li>
        <li>Press the <uicontrol>Save</uicontrol> button.</li>
      </ol>   
    </section>
    
    <section><title>Start data transfer</title>
      <p>Follow these steps:</p> 
      <ol>
        <li>Press the button labeled <uicontrol>Create Replication</uicontrol>.</li>
        <li>Select the bucket from source cluster that you wish to send to ElasticSearch.</li>
        <li>Select the cluster you defined in step 4.</li>
        <li>Type in the name of the ElasticSearch index into which you want to store the data.  This
          index must already exist.</li>
        <li>If you are using Couchbase Server 2.2 or later, click Advanced settings and change the 
          XDCR Protocol setting to Version 1.</li>
      </ol>   
    </section>
    <section><title>Building the project</title>
      <p>This module is built using <codeph>maven</codeph>. It depends on another project which is
        not in any public <codeph>maven</codeph> repositories. See the <xref
          href="https://github.com/couchbaselabs/couchbase-capi-server" format="html"
          scope="external">project</xref> and run <cmdname>mvn install</cmdname> on that first.</p> 
      <p>Afterwards in the project  run:</p>
      <codeblock>mvn package</codeblock>
      <p>The final plugin package will be in the <filepath>target/releases</filepath> folder.</p>
    </section>
    
  </body>
</topic>
