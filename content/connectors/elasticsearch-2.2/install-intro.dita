<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en-us" id="topic2022">
	<title>Installation and configuration</title> <shortdesc>This section describes installation and configuration of ElsticSearch
		Plug-in.</shortdesc>
	<conbody>
		
		<section><title>Prerequisites</title>
			<p>Before you can work with Couchbase and Elasticsearch, you need to set up the Couchbase
				Elasticsearch plug-in, a Couchbase cluster, and an Elasticsearch cluster. Install
				the clusters and then start them. The Couchbase cluster stores any items from your
				application and sends replicas of these items to the Elasticsearch cluster for
				indexing. Your Couchbase cluster can contain one or more instances of Couchbase
				Server, and your Elasticsearch cluster can contain one or more instances of
				Elasticsearch. </p>	
			<p>For compatibility information, see <xref href="release-notes.dita#elastic-release-notes"
			/>.</p>
			
			<p>For now, you probably need only one instance of Couchbase Server running in a cluster and one
				instance of the Elasticsearch engine. Later, as you test your integration under load
				and deploy your implementation, you will need to add more servers to handle the
				workload. </p>
		<!--	<p>The most important point about the Couchbase Server installation is to make sure that
				you include the <codeph>beer-sample</codeph> sample data bucket, which is available
				as an installation option. The examples in this guide build on data contained in the
				sample database. </p> -->
			
			<p>For a pre-built binary package and instruction manual, see the Couchbase Downloads Page and
				the Couchbase Connector Guide for Elasticsearch. This plugin makes your
				ElasticSearch node appear like a Couchbase Server node. After installation, you can
				use the Cross-Datacenter Replication (XDCR) feature of Couchbase Server to transfer
				data continuously.</p>
		</section>

		<section>
			<title>Installation</title>
			<p>To enable full-text search of data in Couchbase, you transmit data from a Couchbase
				cluster to an Elasticsearch cluster where it will be indexed by Elasticsearch. The
				Couchbase Plug-in for Elasticsearch helps transmit data from Couchbase using a
				protocol understood by Elasticsearch. The plug-in ensures that information from
				Couchbase can be mapped and converted into data which Elasticsearch will index and
				query.</p>
			<p>To install the ElasticSearch 1.x compatible plugin, run the following command from
				your ElasticSearch installation folder:</p>
			<codeblock>bin/plugin -i -url http://packages.couchbase.com.s3.amazonaws.com/releases/elastic-search-adapter/ \
				2.1.2/elasticsearch-transport-couchbase-2.1.2.zip</codeblock>
			<p>To install the ElasticSearch 2.1.1 compatible version, run the following command from
				your ElasticSearch installation folder:</p>
			<codeblock>bin/plugin install https://github.com/couchbaselabs/elasticsearch-transport-couchbase/releases/ \
					download/v2.2.1.2/elasticsearch-transport-couchbase-2.2.1.2.zip</codeblock>
		</section>
		
		<section><title>Configuration</title>
			<note type="important">ElasticSearch 2.1:  Due to changes in the plugin security mechanism, when installing v2.2.x of 
				the plugin you must also edit the Java security policy to grant it appropriate permissions. 
				See the Java Security Policy Permissions topic below for instructions.</note>
				
				<p>Configuration for the plugin is specified as part of the ElasticSearch config file 
					(usually <codeph>elasticsearch.yml</codeph>) and is currently only read when ElasticSearch starts. 
					Dynamic configuration support is planned for the future.</p>
		
		
		</section>
	</conbody>

</concept>
