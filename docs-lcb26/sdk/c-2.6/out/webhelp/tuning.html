
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="You can change library defaults and behavior to better adapt to your application. In addition to the initial settings passed to the client via the connection string, you can adjust properties of the ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Tuning and configuring"></meta><meta name="abstract" content="You can change library defaults and behavior to better adapt to your application."></meta><meta name="description" content="You can change library defaults and behavior to better adapt to your application."></meta><meta name="DC.Relation" scheme="URI" content="c-intro.html"></meta><meta name="DC.Relation" scheme="URI" content="logging.html"></meta><meta name="DC.Relation" scheme="URI" content="common-settings.html"></meta><meta name="DC.Relation" scheme="URI" content="common-settings.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_wtt_2jq_44"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Tuning and configuring</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="concept_wtt_2jq_44">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="c-intro.html" title="C SDK 2.6">C SDK 2.6</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="c-intro.html" title="C SDK 2.6"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C SDK 2.6</span></a></span>  
<span class="navprev"><a class="link" href="logging.html" title="The library offers basic functionality for logging to the program's standard error stream."><span class="navheader_label">Previous topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Setting up logging</span></a></span>  
<span class="navnext"><a class="link" href="common-settings.html" title="Common client settings can be modified via the lcb_cntl() API."><span class="navheader_label">Next topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Common client settings</span></a></span>  </div></td></tr></tbody></table>

 <h1 class="title topictitle1">Tuning and configuring</h1>

 
 <div class="body conbody"><p class="shortdesc">You can change library defaults and behavior to better adapt to your application.</p>

    <div class="p">In addition to the initial settings passed to the client via the connection string, you can
			adjust properties of the client to better function in your specific environment. The
				<span class="keyword apiname">lcb_cntl()</span> function is used to retrieve or modify library settings on
			a per-instance basis. The general syntax for retrieving a setting
			is:<pre class="pre codeblock language-c">lcb_U32 curval;
lcb_cntl(instance, LCB_CNTL_GET, LCB_CNTL_OPTIMEOUT, &amp;curval);</pre>
And
			the general syntax for modifying a setting
			is:<pre class="pre codeblock language-c">lcb_U32 newval = <span class="hl-number">4000000</span>; <em class="hl-comment" style="color:#006400">// Set to 4 seconds</em>
lcb_cntl(instance, LCB_CNTL_SET, LCB_CNTL_OPTIMEOUT, &amp;newval);</pre>
By
			design, this API works similarly to the <samp class="ph codeph">setsockopt()</samp>,
				<samp class="ph codeph">getsockopt()</samp>, and <samp class="ph codeph">ioctl()</samp> interfaces. It is passed an
			instance to operate on, a <em class="ph i">mode</em> constant (what sort of access to perform), a
				<em class="ph i">setting</em> constant (which setting to access) and finally the <em class="ph i">value</em>, which is
			either written to or read from depending on whether the <em class="ph i">mode</em> indicates a
			modification or a retrieval, respectively.</div>

    <p class="p">The <span class="keyword apiname">lcb_cntl()</span> function returns an error code of
				<samp class="ph codeph">LCB_SUCCESS</samp> if successful, <samp class="ph codeph">LCB_NOT_SUPPORTED</samp> (or
				<samp class="ph codeph">LCB_ECTL_UNKNOWN</samp>) if the <em class="ph i">setting</em> is not known. Always check the
			return code and be prepared to take action if the specific operation is not supported in
			the specific version of the library.</p>

    <p class="p">The constants are well defined and do not change between versions. Thus, if you intend to
			modify an optional setting and also intend to compile against a possibly older version of
			the library where the constant is not defined, you can use the raw numeric literal (for
			example, <samp class="ph codeph">0x1E</samp>) rather than the symbolic name.</p>

    <p class="p">The most recent settings are always found in the
				<span class="ph filepath">&lt;libcouchbase/cntl.h&gt;</span> header file.</p>

        <p class="p">Some options are also available in a simplified string format, in which the option names
			and values are strings. These may be set with the <span class="keyword apiname">lcb_cntl_string()</span>
			function or directly embedded into the connection string. The <a class="xref" href="options.html#topic_k5w_kzt_4r" title="Connection strings have a variety of options that you can use.">Connection string reference</a> page lists some of the options.</p>

		<p class="p">For best performance, keep in mind the following points:</p>

    <div class="p">
      <ul class="ul" id="concept_wtt_2jq_44__ul_rkp_njq_44">
        <li class="li">Only open a bucket once per application.</li>

        <li class="li">Connections are expensive to establish (bootstrap period) and expensive to maintain
          (connection count). </li>

      </ul>

    </div>

   
  </div>

<div class="related-links">
<ol class="olchildlinks">
<li class="link olchildlink"><a href="common-settings.html">Common client settings</a>
<div>Common client settings can be modified via the lcb_cntl() 			API.</div></li>
</ol>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="c-intro.html" title="C SDK 2.6"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">C SDK 2.6</span></a></span>  
<span class="navprev"><a class="link" href="logging.html" title="The library offers basic functionality for logging to the program's standard error stream."><span class="navheader_label">Previous topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Setting up logging</span></a></span>  
<span class="navnext"><a class="link" href="common-settings.html" title="Common client settings can be modified via the lcb_cntl() API."><span class="navheader_label">Next topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Common client settings</span></a></span>  </div><div class="footer">WebHelp output generated by<a href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a> - Trial Edition</div>
</body>
</html>